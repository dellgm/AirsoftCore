
@page
@model AirsoftCore.WebUI.Pages.Products.IndexModel
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@using AirsoftCore.WebUI.Extensions
@{

    ViewData["Title"] = "Index";
}

<h2>List of Products</h2>

<a asp-page="./Create">Create New Product</a>
<hr />
<form method="get">

    @foreach (var row in Model.Products.Products.ToArray().Split(4))
    {
        <div class="row">
            @foreach (var product in row)
            {

                var base64 = Convert.ToBase64String(product.Image);
                var imgSrc = $"data:image/jpg;base64,{base64}";

                <div class="col-lg-3 col-md-6">
                    <div class="card" style="margin-bottom: 10px; height:344px">
                        <img height="150" width="100" class="card-img-top" src="@imgSrc" alt="Card image cap">
                        <div class="card-body">
                            <div class="card-title" style="text-align: center">
                                @Html.ActionLink(product.Descr, "Details", new { id = product.ProductId })
                            </div>
                            <div class="card-text" style="text-align: center">
                                <h4>@product.Price €</h4>
                            </div>
                        </div>
                        <div class="card-footer">
                            @Html.ActionLink("Add to cart", "AddToCart", "ShoppingCart", new { id = product.ProductId }, htmlAttributes: new { @class = "btn btn-sm btn-block text-uppercase", @style = "color: white; background-color: #007bff", @id = "btnAddToCart" })
                        </div>
                    </div>
                </div>
            }
        </div>
    }
</form>

